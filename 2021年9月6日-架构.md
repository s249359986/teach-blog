# 架构

架构设计的关键思维是判断和取舍，程序设计的关键思维是逻辑和实现

### 架构到底是指什么?

#### 模块与组件
模块和组件都是系统的组成部分，只是从不同的角度拆分系统而已

逻辑的角度来拆分系统后，得到的单元就是“模块”；从物理的角度来拆分系统后，得到的单元就是“组件”

学生信息管理系统，这个系统从逻辑的角度来拆分，可以分为“登录注册模块”“个人信息模块”“个人成绩模块”；从物理的角度来拆分，可以拆分为Nginx、Web服务器、MySQL

#### 框架与架构

框架关注的是“规范”，架构关注的是“结构”

### 架构设计的真正目的?
架构设计的主要目的是为了解决软件系统复杂度带来的问题

### 核心要素
- 元素  组成系统的基本单位例如模块，子系统，子组件
- 关系  元素直接联系，例如 依赖，继承，组合，聚合
- 约束  对关系的要求
- 原理  为什么这样做

### 设计原则
- 单一职责
- 开闭原则  用新增（扩展）来取代修改
- 里式替换  父类能够出现的地方子类一定能够出现
- 接口隔离  不要让一个类依赖另一个类中用不到的接口，简单说就是最小化组件之间的接口依赖和耦合
- 依赖反转  依赖抽象类与接口，而不是具体实现；让低层次模块依赖高层次模块的稳定抽象，实现解耦[例子](https://zhuanlan.zhihu.com/p/275785681)
- 合适原则  合适原则宣言：“合适优于业界领先”
- 简单原则  简单原则宣言：“简单优于复杂”
- 演化原则  演化原则宣言：“演化优于一步到位”

### 衡量指标

- 性能
- 兼容性
- 可用性
- 可靠性
- 安全性
- 可维护性
- 移植性

### 架构模式


### 高性能

#### 单机复杂度

#### 集群复杂度

1.任务分配
2.任务分解

### 高可用

#### 计算高可用
无论在哪台机器上进行计算，同样的算法和输入数据，产出的结果都是一样的

#### 存储高可用
将数据从一台机器搬到到另一台机器，需要经过线路进行传输

#### 高可用状态决策
1.独裁式
2.协商式
3.民主式

### 可扩展

#### 应对变化
将“变化”封装在一个“变化层”，将不变的部分封装在一个独立的“稳定层”

提炼出一个“抽象层”和一个“实现层”

### 低成本，安全，规模


## [脑图](https://www.yuque.com/u21687997/dxgwen/cm8xsf)
